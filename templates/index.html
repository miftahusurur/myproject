{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block head %}
{{ super() }}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<script src="https://cdn.tailwindcss.com"></script>
<style>
    /* Add a subtle 3D effect on hover */
    .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.15), 0 3px 6px rgba(0,0,0,0.1);
    }
</style>
{% endblock %}

{% block content %}
<div class="bg-gray-100 min-h-screen py-8 px-3 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
        <h1 class="text-2xl sm:text-4xl font-extrabold text-gray-900 text-center mb-8 sm:mb-10">
            Dashboard Aplikasi Penjualan Gas
        </h1>

        <!-- Menu Dashboard -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 mb-8">
            <a href="{{ url_for('transaksi.transaksi') }}" class="block bg-white rounded-xl shadow-2xl p-6 sm:p-8 flex flex-col items-center text-center transition-all duration-300 transform card-hover">
                <div class="text-5xl sm:text-6xl text-purple-600 mb-4">
                    <i class="bi bi-receipt"></i>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2">Transaksi Penjualan</h3>
                <p class="text-gray-600 text-sm sm:text-base mb-4 sm:mb-6">Fitur untuk melakukan proses transaksi jual beli.</p>
                <div class="inline-flex items-center px-4 sm:px-6 py-1.5 sm:py-2 border border-transparent text-sm font-medium rounded-full shadow-sm text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300">
                    <i class="bi bi-arrow-right-circle-fill mr-2"></i> Masuk
                </div>
            </a>
            
            {% if g.user and g.user.get('role') == 'admin' %}
            <a href="{{ url_for('tambah_gas.tambah_gas') }}" class="block bg-white rounded-xl shadow-2xl p-6 sm:p-8 flex flex-col items-center text-center transition-all duration-300 transform card-hover">
                <div class="text-5xl sm:text-6xl text-blue-600 mb-4">
                    <i class="bi bi-box-seam"></i>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2">Kelola Stok Gas</h3>
                <p class="text-gray-600 text-sm sm:text-base mb-4 sm:mb-6">Kelola master data gas, tambah stok baru, dan pantau ketersediaan.</p>
                <div class="inline-flex items-center px-4 sm:px-6 py-1.5 sm:py-2 border border-transparent text-sm font-medium rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-all duration-300">
                    <i class="bi bi-arrow-right-circle-fill mr-2"></i> Masuk
                </div>
            </a>
            
            <a href="{{ url_for('laporan.laporan') }}" class="block bg-white rounded-xl shadow-2xl p-6 sm:p-8 flex flex-col items-center text-center transition-all duration-300 transform card-hover">
                <div class="text-5xl sm:text-6xl text-green-600 mb-4">
                    <i class="bi bi-graph-up"></i>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2">Lihat Laporan</h3>
                <p class="text-gray-600 text-sm sm:text-base mb-4 sm:mb-6">Akses laporan penjualan harian untuk analisis dan pemantauan kinerja.</p>
                <div class="inline-flex items-center px-4 sm:px-6 py-1.5 sm:py-2 border border-transparent text-sm font-medium rounded-full shadow-sm text-white bg-green-600 hover:bg-green-700 transition-all duration-300">
                    <i class="bi bi-arrow-right-circle-fill mr-2"></i> Masuk
                </div>
            </a>
            
            <a href="{{ url_for('auth.register') }}" class="block bg-white rounded-xl shadow-2xl p-6 sm:p-8 flex flex-col items-center text-center transition-all duration-300 transform card-hover">
                <div class="text-5xl sm:text-6xl text-yellow-600 mb-4">
                    <i class="bi bi-person-circle"></i>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2">Manajemen Pengguna</h3>
                <p class="text-gray-600 text-sm sm:text-base mb-4 sm:mb-6">Kelola akun dan hak akses pengguna dalam sistem Anda.</p>
                <div class="inline-flex items-center px-4 sm:px-6 py-1.5 sm:py-2 border border-transparent text-sm font-medium rounded-full shadow-sm text-white bg-yellow-600 hover:bg-yellow-700 transition-all duration-300">
                    <i class="bi bi-arrow-right-circle-fill mr-2"></i> Registrasi
                </div>
            </a>

            <a href="{{ url_for('cek_penjualan.cek_penjualan') }}" class="block bg-white rounded-xl shadow-2xl p-6 sm:p-8 flex flex-col items-center text-center transition-all duration-300 transform card-hover">
                <div class="text-5xl sm:text-6xl text-teal-600 mb-4">
                    <i class="bi bi-qr-code-scan"></i>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2">Cek Penjualan</h3>
                <p class="text-gray-600 text-sm sm:text-base mb-4 sm:mb-6">Gunakan fitur pemindaian QR untuk membuat transaksi instan.</p>
                <div class="inline-flex items-center px-4 sm:px-6 py-1.5 sm:py-2 border border-transparent text-sm font-medium rounded-full shadow-sm text-white bg-teal-600 hover:bg-teal-700 transition-all duration-300">
                    <i class="bi bi-arrow-right-circle-fill mr-2"></i> Cek
                </div>
            </a>
            
            <div class="block bg-white rounded-xl shadow-2xl p-6 sm:p-8 flex flex-col items-center text-center transition-all duration-300 transform cursor-not-allowed opacity-70">
                <div class="text-5xl sm:text-6xl text-gray-400 mb-4">
                    <i class="bi bi-people"></i>
                </div>
                <h3 class="text-xl sm:text-2xl font-bold text-gray-600 mb-2">Kelola Pelanggan</h3>
                <p class="text-gray-500 text-sm sm:text-base mb-4 sm:mb-6">Fitur untuk mengelola data pelanggan.</p>
                <div class="inline-flex items-center px-4 sm:px-6 py-1.5 sm:py-2 border border-transparent text-sm font-medium rounded-full shadow-sm text-white bg-gray-400">
                    <i class="bi bi-lock-fill mr-2"></i> Segera Hadir
                </div>
            </div>
            {% endif %}

        </div>

        <!-- Produk -->
        <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 text-center mb-4 sm:mb-6 mt-8 sm:mt-12">Produk Tersedia</h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 sm:gap-4 lg:gap-6">
            {% for gas in gas_list %}
                <div class="bg-white rounded-xl shadow-lg p-4 sm:p-6 flex flex-col items-center text-center card-hover relative">
                    {% if gas.harga == 0 %}
                        <div class="absolute top-0 right-0 mt-2 mr-2 sm:mt-4 sm:mr-4 bg-green-500 text-white text-[10px] sm:text-xs font-bold px-1.5 py-0.5 sm:px-2 sm:py-1 rounded-full">GRATIS</div>
                    {% endif %}
                    
                    <div class="relative w-full h-28 sm:h-40 mb-3 sm:mb-4 overflow-hidden rounded-lg">
                        <img src="{{ url_for('static', filename='uploads/' + gas.gambar) }}" alt="{{ gas.jenis_gas }}" class="w-full h-full object-cover rounded-lg">
                    </div>

                    <h4 class="text-sm sm:text-lg font-bold text-gray-800 mb-1">{{ gas.jenis_gas }}</h4>
                    <p class="text-xs sm:text-sm text-gray-600 mb-1 sm:mb-2">Stok: {{ gas.stok }}</p>

                    {% if gas.diskon and gas.diskon > 0 %}
                        <p class="text-xs sm:text-sm text-gray-400 line-through">Rp {{ "{:,.0f}".format(gas.harga).replace(",", ".") }}</p>
                        <p class="text-sm sm:text-lg font-bold text-red-600">Rp {{ "{:,.0f}".format(gas.harga - (gas.harga * gas.diskon / 100)).replace(",", ".") }}</p>
                    {% else %}
                        <p class="text-sm sm:text-lg font-bold text-blue-600">Rp {{ "{:,.0f}".format(gas.harga).replace(",", ".") }}</p>
                    {% endif %}

                    <a href="{{ url_for('transaksi.transaksi', produk_id=gas.id) }}" class="mt-3 w-full bg-blue-500 text-white py-1.5 sm:py-2 px-3 sm:px-4 rounded-full text-xs sm:text-sm hover:bg-blue-600 transition-colors">Beli</a>
                </div>
            {% endfor %}
        </div>

        {% if not gas_list %}
            <div class="flex flex-col items-center justify-center mt-10 sm:mt-12 text-gray-500">
                <i class="bi bi-database-exclamation text-4xl sm:text-6xl"></i>
                <p class="mt-3 sm:mt-4 text-sm sm:text-base">Tidak ada produk yang tersedia.</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
